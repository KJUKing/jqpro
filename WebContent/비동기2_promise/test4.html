<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/public.css">

<!-- <script  src="https://code.jquery.com/jquery-3.7.1.min.js"></script> -->
<script src="../js/jquery-3.7.1.js"></script>
<script>
function getData(){
	
	const promise = new Promise( (resolve, reject) =>{
		
		setTimeout(()=>{
			const data = {name : "김은대"};
			//const data = null;
			
			if(data){
				console.log("데이타 가져오기 성공 ")
				resolve(data);
			}else{
				reject(new Error("데이타 가져오기 실패"));
			}
		}, 1000)
	}) //Promise
	
	return promise;
}//getData



/* const proc1 = () =>{
	//여러가지 기능 작업을 콜백함수내에서 실행 
	getData().then(function(data){
		console.log(`${data.name}님 환영합니다`)
		return getData();
	}).then( data =>{
		console.log(`${data.name}님 환영합니다`)
		return getData();
	}).then( data =>{
		console.log(`${data.name}님 환영합니다`)
	}).catch( error =>{
		console.log(error);
	}).finally( () =>{
		console.log("모든 작업을 마쳤습니다")
	})
} */

const proc1 = () =>{
	//간단 표현 , 깔끔정리 
	//then()함수의 콜백에서 문장이 한문장이라면 자동 리턴한다  -  {} 없고 return문장이 없다  ;도 없다 
	getData().then(data => getData())
	.then(data => getData())
	.then(data => getData())
	.catch(error=> console.log(error))
	.finally(()=> console.log("마무리 끝"));
}


/* //콜백지옥
getData((data) =>{
	getData((data) =>{
		getData((data) =>{
			getData((data) =>{
				
			})
		})
	})
}) */
</script>
</head>
<body>


<div class="box">
    <h3>1. 
   </h3>
	<input type="button" value="확인" onclick="proc1()">

	<br>
	<div id="result1"></div>
</div>

</body>
</html>